#!/usr/bin/env bash
set -euo pipefail

if [[ "${SKIP_DOD:-0}" == "1" ]]; then
  echo "[pre-commit] SKIP_DOD=1 set, skipping DoD checks."
  exit 0
fi

repo_root="$(git rev-parse --show-toplevel)"
cd "$repo_root"

echo "[pre-commit] Running local DoD checks (staged scope)..."
bash ./scripts/verify_dod.sh
